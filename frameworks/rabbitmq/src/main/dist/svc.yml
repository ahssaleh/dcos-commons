name: {{FRAMEWORK_NAME}}
scheduler:
  principal: {{FRAMEWORK_PRINCIPAL}}
  user: {{FRAMEWORK_USER}}
pods:
  rabbitmq:
    count: {{NODE_COUNT}}
    image: {{ERLANG_IMAGE}}
    placement: {{NODE_PLACEMENT}}
    {{#ENABLE_VIRTUAL_NETWORK}}
    networks:
      {{VIRTUAL_NETWORK_NAME}}:
        labels: {{VIRTUAL_NETWORK_PLUGIN_LABELS}}
    {{/ENABLE_VIRTUAL_NETWORK}}
    uris:
      - {{BOOTSTRAP_URI}}
      - {{RABBITMQ_URI}}
    tasks:
      node:
        goal: RUNNING
        cmd: {{RABBITMQ_VERSION}}/sbin/rabbitmq-server
        env:
          HOME: /mnt/mesos/sandbox/home
        cpus: {{NODE_CPUS}}
        memory: {{NODE_MEM}}
        ports:
          epmd:
            port: 4369
          amqp:
            port: 5672
          amqp-tls:
            port: 5671
          erlang:
            port: 25672
          http:
            port: 15672
          #stomp:
          #  port: 61613
          #stop-tls:
          #  port: 61614
          mqtt:
            port: 1883
          mqtt-tls:
            port: 8883
          web-stomp:
            port: 15674
          web-mqtt:
            port: 15675
        volumes:
          node-data-vol:
            path: "home"
            type: ROOT
            size: 4096
